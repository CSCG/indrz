{% load staticfiles %}
{% load i18n %}

{% block head_extra %}
    <link rel="stylesheet" href="{% static "js/jstree/themes/default/style.min.css" %}" />


{% endblock head_extra %}

<div style="overflow: auto; height:500px;">
  <div id="jstree">
    <!-- in this example the tree is populated from inline HTML -->
      {% include "poi/poi-category.html" %}

  </div>

</div>



  <!-- 4 include the jQuery library -->
  <!-- 5 include the minified jstree source -->
  <script src="{% static "js/jstree/jstree.min.js" %}"></script>
  <script>

  $(function () {
    // 6 create an instance when the DOM is ready
    $('#jstree').jstree({
    "checkbox" : {
      "keep_selected_style" : true,
      "visible" : false,
      "three_state": false
    },
    "plugins" : [ "checkbox", "wholerow" ]
  });


      $('#jstree').on("changed.jstree", function(e, data) {
          var nodeName = $('#jstree').jstree(true).get_text(data.node);
            if(poiExist(nodeName.trim())){

            }
            else
            {
                var Catid = data.node.id;
                var catNumId = Catid.split("_")[1];
                var poiIconName = $('#jstree').jstree(true).get_icon(data.node.id);
                console.log("poi icon name is:" + poiIconName);
                createPoi(1, nodeName.trim(), catNumId, poiIconName);
            }


      });

    $('#jstree').on("deselect_node.jstree", function(e, data) {
        var nodeName = $('#jstree').jstree(true).get_text(data.node.id);
        console.log("deselected  :" + nodeName.trim());

                //map.removeLayer(poiLayer);
                setPoiVisibility(nodeName.trim());
                console.log("removing poi layer now");
                //map.getLayers().pop();

      });

          $('#jstree').on("select_node.jstree", function(e, data) {
            var nodeName = $('#jstree').jstree(true).get_text(data.node.id);
            console.log("SELECTED  :" + nodeName.trim());

            var Catid = data.node.id;
            var catNumId = Catid.split("_")[1];
            console.log("current id is num: " + Catid);
            console.log("id num is: " + catNumId);







                //map.removeLayer(poiLayer);
                setPoiVisibility(nodeName.trim());
                console.log("make it Visible");
                //map.getLayers().pop();

      });




  });
  </script>
